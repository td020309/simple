<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>Simple Scheduler · Deadlines & Monthly Calendar</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect x='15' y='45' width='18' height='40' rx='9' fill='%235B9FD8'/><rect x='41' y='25' width='18' height='60' rx='9' fill='%2361C282'/><rect x='67' y='10' width='18' height='75' rx='9' fill='%23E89560'/></svg>">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <div id="auth-container">
    <div class="auth-box">
      <h1 class="app-title">Simple Scheduler</h1>
      
      <!-- 로그인 화면용 컨트롤 바 -->
      <div class="auth-control-bar">
        <div class="language-btn-container">
          <button id="authLanguageBtn" class="language-btn">ENG</button>
        </div>
        
        <div class="toggle-container">
          <div class="toggle-switch" id="authDarkModeToggle">
            <div class="toggle-track">
              <div class="toggle-thumb">
                <span class="toggle-icon">🌙</span>
              </div>
            </div>
            <div class="toggle-labels">
              <span class="label-left active">라이트</span>
              <span class="label-right">다크</span>
            </div>
          </div>
        </div>
      </div>
      
      <p class="auth-hint">이메일과 비밀번호로 로그인하세요.</p>
      <div class="field">
        <label for="email" class="field-label">이메일</label>
        <input type="email" id="email" placeholder="이메일 주소를 입력하세요.">
      </div>
      <div class="field">
        <label for="password" class="field-label">비밀번호</label>
        <input type="password" id="password" placeholder="비밀번호를 입력하세요.">
      </div>
      
      <div id="auth-feedback" class="auth-feedback"></div>

      <div class="auth-buttons">
        <button id="loginBtn">로그인</button>
      </div>
      <div class="signup-cta">
        <span>계정이 없으신가요?</span>
        <button id="signupBtn" class="link-button">회원가입</button>
      </div>
      <div class="copyright">© 2025 Sangyeon Ryu. All rights reserved.</div>
    </div>
  </div>

  <div id="signup-container" style="display:none;">
    <div class="auth-box">
      <h1 class="app-title">Simple Scheduler</h1>
      
      <!-- 회원가입 화면용 컨트롤 바 -->
      <div class="auth-control-bar">
        <div class="language-btn-container">
          <button id="signupLanguageBtn" class="language-btn">ENG</button>
        </div>
        
        <div class="toggle-container">
          <div class="toggle-switch" id="signupDarkModeToggle">
            <div class="toggle-track">
              <div class="toggle-thumb">
                <span class="toggle-icon">🌙</span>
              </div>
            </div>
            <div class="toggle-labels">
              <span class="label-left active">라이트</span>
              <span class="label-right">다크</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="field">
        <label for="signupEmail" class="field-label">이메일</label>
        <input type="email" id="signupEmail" placeholder="이메일 주소를 입력하세요.">
      </div>
      <div class="field">
        <label for="signupPassword" class="field-label">비밀번호</label>
        <input type="password" id="signupPassword" placeholder="비밀번호 (6자 이상)">
      </div>
      <div class="field">
        <label for="signupPasswordConfirm" class="field-label">비밀번호 확인</label>
        <input type="password" id="signupPasswordConfirm" placeholder="비밀번호를 다시 입력하세요.">
      </div>
      <div id="signup-feedback" class="auth-feedback"></div>
      <div class="auth-buttons" style="margin-top:8px;">
        <button id="signupSubmitBtn">가입하기</button>
        <button id="signupBackBtn">뒤로</button>
      </div>
      <div class="verify-cta" style="display:none;">
        <span>인증 메일을 못 받으셨나요?</span>
        <button id="resendVerifyBtn" class="link-button">인증 메일 재전송</button>
      </div>
      <div class="copyright">© 2025 Sangyeon Ryu. All rights reserved.</div>
    </div>
  </div>

  <div id="scheduler-container" style="display:none;">
    <div class="header-bar">
      <div class="header-left">
        <h1 class="app-title">Simple Scheduler</h1>
        <div class="view-switcher">
          <button id="segWeekly" class="view-switch-btn active" onclick="setViewMode('weekly')">주간 뷰</button>
          <button id="segMonthly" class="view-switch-btn" onclick="setViewMode('monthly')">월간 뷰</button>
        </div>
      </div>
      <div class="header-utilities">
        <div class="settings-container">
          <button id="settingsBtn" type="button" class="settings-btn" onclick="toggleSettingsMenu()" title="설정">⚙️</button>
          <div id="settingsMenu" class="settings-dropdown">
            <div class="menu-item">
              <span class="menu-item-label" data-key="darkMode">다크 모드</span>
              <div class="ios-toggle-switch" id="darkModeToggle" onclick="toggleDarkMode()">
                <div class="ios-toggle-track">
                  <div class="ios-toggle-thumb"></div>
                </div>
              </div>
            </div>
            <div class="menu-divider"></div>
            <div class="menu-item">
              <span class="menu-item-label" data-key="language">언어 / Language</span>
              <div class="language-button-group">
                <button id="languageBtnKo" class="language-btn mini" type="button">KOR</button>
                <button id="languageBtnEn" class="language-btn mini" type="button">ENG</button>
              </div>
            </div>
          </div>
        </div>
        <div id="user-info">
          <div class="user-email-container">
            <span id="userEmail"></span>
          </div>
          <button id="logoutBtn" title="로그아웃">로그아웃</button>
        </div>
      </div>
    </div>
    <div class="header-divider"></div>

    <div class="control-bar">
      <!-- 좌측: 세그먼트 컨트롤 (주간 | 월간) - 제거됨, header-bar로 이동 -->
      <div class="control-bar-left" style="display:none;">
      </div>
      
      <!-- 중앙: 날짜 네비게이션 -->
      <div class="control-bar-center">
        <!-- 주간뷰 네비게이션 -->
        <div id="weeklyNav" class="nav-group">
          <button onclick="prevWeek()">⟵ 저번주</button>
          <button id="btnThisWeek" class="current" onclick="thisWeek()">이번주</button>
          <button onclick="nextWeek()">다음주 ⟶</button>
          <button id="btnDeadlineMode" class="icon-btn deadline" title="데드라인 모드" onclick="toggleDeadlineMode()">⎯</button>
          <button id="btnMonth" class="icon-btn" title="달력 보기 (기념일/생일)">📆</button>
        </div>
        <!-- 월간뷰 네비게이션 -->
        <div id="monthlyNav" class="nav-group" style="display:none;">
          <button onclick="prevQuadrantMonth()">⟵ 저번달</button>
          <button id="btnThisMonth" class="current" onclick="thisMonth()">이번달</button>
          <button onclick="nextQuadrantMonth()">다음달 ⟶</button>
          <button id="btnDeadlineModeMonthly" class="icon-btn deadline" title="데드라인 모드" onclick="toggleDeadlineMode()">⎯</button>
          <button id="btnMonthMonthly" class="icon-btn" title="달력 보기 (기념일/생일)">📆</button>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="blocks" id="blockList">
        </div>

      <div class="calendar">
        <div class="calendar-header">
          <div id="calendarDateInfo" class="calendar-date-info">
            <div class="month-title-group">
              <h2 class="month-number"></h2>
              <div class="month-sub">
                <span class="year-number"></span>
                <span class="month-text"></span>
              </div>
            </div>
          </div>
        </div>
        <!-- 주간뷰: 테이블 -->
        <table id="calendarTable"></table>
        <!-- 월간뷰: 슬롯 쿼드런트 그리드 -->
        <div id="quadrantViewContainer" style="display:none;">
          <div class="quadrant-grid-main" id="quadrantGridMain"></div>
        </div>
      </div>
    </div>

    <div class="summary">
      <div class="report"><h3>저번주</h3><div id="lastWeek"></div></div>
      <div class="report"><h3>이번주</h3><div id="thisWeek"></div></div>
      <div class="report"><h3>다음주</h3><div id="nextWeek"></div></div>
    </div>
    <div class="copyright">© 2025 Sangyeon Ryu. All rights reserved.</div>
  </div>

  <div class="modal" id="modal">
    <div class="modal-content">
      <div class="modal-head">
        <h3 id="modalTitle">📝 메모</h3>
        <button type="button" class="modal-close" onclick="closeMemoModal()">✕</button>
      </div>
      <textarea id="memo" placeholder="메모를 입력하세요..."></textarea>
      <div class="memo-options">
        <div class="memo-time-section">
          <button type="button" class="time-set-btn" id="timeIconBtn" onclick="openTimeModal()">
            <span id="timeTagIcon">시간 설정</span>
            <span id="timeTagText" class="time-badge-display" style="display:none;"></span>
          </button>
          <button type="button" class="time-clear-icon-btn" id="timeClearBtn" onclick="clearTime()" style="display:none;" title="시간 삭제">✕</button>
        </div>
        <label class="memo-recurring-field">
          <input type="checkbox" id="memoRecurringToggle">
          <span id="memoRecurringLabel">매주 이 시간에 반복</span>
        </label>
      </div>
      <div class="modal-footer">
        <button class="save" onclick="saveMemo()">저장</button>
        <button class="delete" onclick="deletePlaced()">삭제</button>
      </div>
    </div>
  </div>

  <div class="modal" id="addBlockModal">
    <div class="modal-content">
      <div class="modal-head">
        <h3 id="blockModalTitle">새 블럭 추가</h3>
        <button type="button" class="modal-close" onclick="closeBlockModal()">✕</button>
      </div>
      <input type="text" id="newBlockName" placeholder="이름">
      <div class="spacer"></div>
      <div class="color-row">
        <span style="font-size:13px; color:var(--muted);">색상</span>
        <input type="color" id="newBlockColor" value="#888888">
      </div>
      <div class="modal-footer">
        <button class="save" onclick="saveBlock()" id="blockSaveBtn">추가</button>
        <button class="delete" onclick="closeBlockModal()" id="blockCancelBtn" style="display:none;">취소</button>
      </div>
    </div>
  </div>

  <div class="modal" id="monthModal">
    <div class="modal-content" style="min-width: 720px;">
      <div class="month-head">
        <button class="icon-btn" onclick="shiftMonth(-1)">⟵</button>
        <div class="title" id="monthTitle">
          <div class="month-title-group">
            <h2 class="month-number">11</h2>
            <div class="month-sub">
              <span class="year-number">2025</span>
              <span class="month-text">NOVEMBER</span>
            </div>
          </div>
        </div>
        <button class="icon-btn" onclick="shiftMonth(1)">⟶</button>
      </div>
      <div class="month-grid" id="monthGrid"></div>
      <div class="hint">원하는 날짜를 눌러 <b>기념일/생일</b> 라벨을 추가하세요. 동그라미와 라벨은 주간 보기에 자동 반영됩니다.</div>
    </div>
  </div>


  <div class="modal" id="specialModal">
    <div class="modal-content">
      <div class="modal-head">
        <h3 id="specialModalTitle">기념일/생일</h3>
        <button type="button" class="modal-close" onclick="closeSpecial()">✕</button>
      </div>
      <div class="special-list-container" id="specialList">
        <!-- 특별한 날 목록이 여기에 동적으로 추가됩니다 -->
      </div>
      <div class="special-add-form" id="specialAddForm">
        <div class="special-add-header">
          <span style="font-size:13px; color:var(--muted); font-weight:600;">새로 추가하기</span>
        </div>
        <input type="text" id="specialLabel" placeholder="예: 여친 생일 / 월급날 / D-Day">
        <div class="color-row">
          <span style="font-size:13px; color:var(--muted);">색상</span>
          <input type="color" id="specialColor" value="#4f46e5">
        </div>
        <div class="modal-footer">
          <button class="save" onclick="saveSpecial()">추가</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="deadlineModal">
    <div class="modal-content">
      <h3>데드라인 제목</h3>
      <input type="text" id="deadlineTitle" placeholder="무엇에 대한 데드라인인지 입력">
      <div class="modal-footer">
        <button class="save" onclick="saveDeadline()">저장</button>
        <button class="delete" onclick="deleteDeadline()">삭제</button>
      </div>
    </div>
  </div>

  <div class="modal" id="timeModal">
    <div class="modal-content time-modal-content">
      <div class="modal-head">
        <h3>시간 설정</h3>
        <button type="button" class="modal-close" onclick="closeTimeModal()">✕</button>
      </div>
      <div class="time-picker-container">
        <div class="am-pm-selector">
          <button type="button" class="am-pm-btn active" id="amBtn" onclick="selectAmPm('AM')">오전</button>
          <button type="button" class="am-pm-btn" id="pmBtn" onclick="selectAmPm('PM')">오후</button>
        </div>
        <div class="time-picker">
          <div class="time-input-group">
            <div class="time-input-wrapper">
              <button type="button" class="time-arrow-btn time-arrow-up" onclick="adjustTime('hour', 1)">▲</button>
              <input type="number" id="timeHour" class="time-number-input" min="1" max="12" placeholder="12" value="12" onchange="updateTimePreview()">
              <button type="button" class="time-arrow-btn time-arrow-down" onclick="adjustTime('hour', -1)">▼</button>
            </div>
          </div>
          <span class="time-separator">:</span>
          <div class="time-input-group">
            <div class="time-input-wrapper">
              <button type="button" class="time-arrow-btn time-arrow-up" onclick="adjustTime('minute', 1)">▲</button>
              <input type="number" id="timeMinute" class="time-number-input" min="0" max="59" placeholder="00" value="00" onchange="updateTimePreview()">
              <button type="button" class="time-arrow-btn time-arrow-down" onclick="adjustTime('minute', -1)">▼</button>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="save" onclick="confirmTime()">확인</button>
        <button class="delete" onclick="closeTimeModal()">취소</button>
      </div>
    </div>
  </div>

  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
  
  <script src="config.js"></script>
  <script src="script.js"></script>

</body>
</html>
